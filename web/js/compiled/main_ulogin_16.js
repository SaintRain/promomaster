"1.4.16";(function(b,d,a,c){"undefined"==typeof b.easyXDM&&function(az,ay,ax,aw,aq,au){function av(f,e){var g=typeof f[e];return"function"==g||!("object"!=g||!f[e])||"unknown"==g}function ar(){if(!ae(a.plugins)&&"object"==typeof a.plugins["Shockwave Flash"]){var f=a.plugins["Shockwave Flash"].description;f&&!ae(a.mimeTypes)&&a.mimeTypes["application/x-shockwave-flash"]&&a.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(ac=f.match(/\d+/g))}if(!ac){var e;try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),ac=Array.prototype.slice.call(e.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1)}catch(g){}}if(!ac){return !1}f=parseInt(ac[0],10);e=parseInt(ac[1],10);o=9<f&&0<e;return !0}function ap(){if(!ab){ab=!0;for(var e=0;e<w.length;e++){w[e]()}w.length=0}}function U(f,e){ab?f.call(e):w.push(function(){f.call(e)})}function J(){var f=parent;if(""!==D){for(var e=0,g=D.split(".");e<g.length;e++){f=f[g[e]]}}return f.easyXDM}function ao(f){var e=f.toLowerCase().match(v);f=e[2];var g=e[3],e=e[4]||"";if("http:"==f&&":80"==e||"https:"==f&&":443"==e){e=""}return f+"//"+g+e}function B(f){f=f.replace(ag,"$1/");if(!f.match(/^(http||https):\/\//)){var e="/"===f.substring(0,1)?"":ax.pathname;"/"!==e.substring(e.length-1)&&(e=e.substring(0,e.lastIndexOf("/")+1));f=ax.protocol+"//"+ax.host+e+f}for(;k.test(f);){f=f.replace(k,"")}return f}function Q(f,e){var l="",h=f.indexOf("#");-1!==h&&(l=f.substring(h),f=f.substring(0,h));var h=[],g;for(g in e){e.hasOwnProperty(g)&&h.push(g+"="+au(e[g]))}return f+(j?"#":-1==f.indexOf("?")?"?":"&")+h.join("&")+l}function ae(e){return"undefined"===typeof e}function an(g,e,q){var l,h;for(h in e){e.hasOwnProperty(h)&&(h in g?(l=e[h],"object"===typeof l?an(g[h],l,q):q||(g[h]=e[h])):g[h]=e[h])}return g}function ad(g){if(ae(u)){var r=ay.body.appendChild(ay.createElement("form")),q=r.appendChild(ay.createElement("input"));q.name=al+"TEST"+ah;u=q!==r.elements[q.name];ay.body.removeChild(r)}u?r=ay.createElement('<iframe name="'+g.props.name+'"/>'):(r=ay.createElement("IFRAME"),r.name=g.props.name);r.id=r.name=g.props.name;delete g.props.name;"string"==typeof g.container&&(g.container=ay.getElementById(g.container));g.container||(an(r.style,{position:"absolute",top:"-2000px",left:"0px"}),g.container=ay.body);q=g.props.src;g.props.src="javascript:false";an(r,g.props);r.border=r.frameBorder=0;r.allowTransparency=!0;g.container.appendChild(r);g.onLoad&&ak(r,"load",g.onLoad);if(g.usePost){var e=g.container.appendChild(ay.createElement("form")),h;e.target=r.name;e.action=q;e.method="POST";if("object"===typeof g.usePost){for(var l in g.usePost){g.usePost.hasOwnProperty(l)&&(u?h=ay.createElement('<input name="'+l+'"/>'):(h=ay.createElement("INPUT"),h.name=l),h.value=g.usePost[l],e.appendChild(h))}}e.submit();e.parentNode.removeChild(e)}else{r.src=q}g.props.src=q;return r}function af(g){var r=g.protocol,t;g.isHost=g.isHost||ae(am.xdm_p);j=g.hash||!1;g.props||(g.props={});if(g.isHost){g.remote=B(g.remote),g.channel=g.channel||"default"+ah++,g.secret=Math.random().toString(16).substring(2),ae(r)&&(r=ao(ax.href)==ao(g.remote)?"4":av(az,"postMessage")||av(ay,"postMessage")?"1":g.swf&&av(az,"ActiveXObject")&&ar()?"6":"Gecko"===a.product&&"frameElement" in az&&-1==a.userAgent.indexOf("WebKit")?"5":g.remoteHelper?"2":"0")}else{g.channel=am.xdm_c.replace(/["'<>\\]/g,"");g.secret=am.xdm_s;g.remote=am.xdm_e.replace(/["'<>\\]/g,"");var r=am.xdm_p,e;if(e=g.acl){az:{e=g.acl;var l=g.remote;"string"==typeof e&&(e=[e]);for(var q,h=e.length;h--;){if(q=e[h],q=new RegExp("^"==q.substr(0,1)?q:"^"+q.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),q.test(l)){e=!0;break az}}e=!1}e=!e}if(e){throw Error("Access denied for "+g.remote)}}g.protocol=r;switch(r){case"0":an(g,{interval:100,delay:2000,useResize:!0,useParent:!1,usePolling:!1},!0);if(g.isHost){if(!g.local){r=ax.protocol+"//"+ax.host;t=ay.body.getElementsByTagName("img");for(l=t.length;l--;){if(e=t[l],e.src.substring(0,r.length)===r){g.local=e.src;break}}g.local||(g.local=az)}r={xdm_c:g.channel,xdm_p:0};g.local===az?(g.usePolling=!0,g.useParent=!0,g.local=ax.protocol+"//"+ax.host+ax.pathname+ax.search,r.xdm_e=g.local,r.xdm_pa=1):r.xdm_e=B(g.local);g.container&&(g.useResize=!1,r.xdm_po=1);g.remote=Q(g.remote,r)}else{an(g,{channel:am.xdm_c,remote:am.xdm_e,useParent:!ae(am.xdm_pa),usePolling:!ae(am.xdm_po),useResize:g.useParent?!1:g.useResize})}t=[new at.stack.HashTransport(g),new at.stack.ReliableBehavior({}),new at.stack.QueueBehavior({encode:!0,maxLength:4000-g.remote.length}),new at.stack.VerifyBehavior({initiate:g.isHost})];break;case"1":t=[new at.stack.PostMessageTransport(g)];break;case"2":g.isHost&&(g.remoteHelper=B(g.remoteHelper));t=[new at.stack.NameTransport(g),new at.stack.QueueBehavior,new at.stack.VerifyBehavior({initiate:g.isHost})];break;case"3":t=[new at.stack.NixTransport(g)];break;case"4":t=[new at.stack.SameOriginTransport(g)];break;case"5":t=[new at.stack.FrameElementTransport(g)];break;case"6":ac||ar(),t=[new at.stack.FlashTransport(g)]}t.push(new at.stack.QueueBehavior({lazy:g.lazy,remove:!0}));return t}function aA(g){for(var e,q={incoming:function(r,f){this.up.incoming(r,f)},outgoing:function(r,f){this.down.outgoing(r,f)},callback:function(f){this.up.callback(f)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},l=0,h=g.length;l<h;l++){e=g[l],an(e,q,!0),0!==l&&(e.down=g[l-1]),l!==h-1&&(e.up=g[l+1])}return e}function i(e){e.up.down=e.down;e.down.up=e.up;e.up=e.down=null}var s=this,ah=Math.floor(10000*Math.random()),n=Function.prototype,v=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,k=/[\-\w]+\/\.\.\//,ag=/([^:])\/\//g,D="",at={},aj=az.easyXDM,al="easyXDM_",u,j=!1,ac,o,ak,N;if(av(az,"addEventListener")){ak=function(f,e,g){f.addEventListener(e,g,!1)},N=function(f,e,g){f.removeEventListener(e,g,!1)}}else{if(av(az,"attachEvent")){ak=function(f,e,g){f.attachEvent("on"+e,g)},N=function(f,e,g){f.detachEvent("on"+e,g)}}else{throw Error("Browser not supported")}}var ab=!1,w=[],p;"readyState" in ay?(p=ay.readyState,ab="complete"==p||~a.userAgent.indexOf("AppleWebKit/")&&("loaded"==p||"interactive"==p)):ab=!!ay.body;if(!ab){if(av(az,"addEventListener")){ak(ay,"DOMContentLoaded",ap)}else{if(ak(ay,"readystatechange",function(){"complete"==ay.readyState&&ap()}),ay.documentElement.doScroll&&az===top){var ai=function(){if(!ab){try{ay.documentElement.doScroll("left")}catch(e){aw(ai,1);return}ap()}};ai()}}ak(az,"load",ap)}var am=function(f){f=f.substring(1).split("&");for(var e={},h,g=f.length;g--;){h=f[g].split("="),e[h[0]]=aq(h[1])}return e}(/xdm_e=/.test(ax.search)?ax.search:ax.hash),m=function(){var f={},e={a:[1,2,3]};if("undefined"!=typeof JSON&&"function"===typeof JSON.stringify&&'{"a":[1,2,3]}'===JSON.stringify(e).replace(/\s/g,"")){return JSON}Object.toJSON&&'{"a":[1,2,3]}'===Object.toJSON(e).replace(/\s/g,"")&&(f.stringify=Object.toJSON);"function"===typeof String.prototype.evalJSON&&(e='{"a":[1,2,3]}'.evalJSON(),e.a&&3===e.a.length&&3===e.a[2]&&(f.parse=function(g){return g.evalJSON()}));return f.stringify&&f.parse?(m=function(){return f},f):null};an(at,{version:"2.4.19.0",query:am,stack:{},apply:an,getJSONObject:m,whenReady:U,noConflict:function(e){az.easyXDM=aj;(D=e)&&(al="easyXDM_"+D.replace(".","_")+"_");return at}});at.DomHelper={on:ak,un:N,requiresJSON:function(e){"object"==typeof az.JSON&&az.JSON||ay.write('<script type="text/javascript" src="'+e+'">\x3c/script>')}};(function(){var e={};at.Fn={set:function(f,g){e[f]=g},get:function(f,h){if(e.hasOwnProperty(f)){var g=e[f];h&&delete e[f];return g}}}})();at.Socket=function(f){var e=aA(af(f).concat([{incoming:function(h,l){f.onMessage(h,l)},callback:function(h){if(f.onReady){f.onReady(h)}}}])),g=ao(f.remote);this.origin=ao(f.remote);this.destroy=function(){e.destroy()};this.postMessage=function(h){e.outgoing(h,g)};e.init()};at.Rpc=function(g,e){if(e.local){for(var q in e.local){if(e.local.hasOwnProperty(q)){var l=e.local[q];"function"===typeof l&&(e.local[q]={method:l})}}}var h=aA(af(g).concat([new at.stack.RpcBehavior(this,e),{callback:function(f){if(g.onReady){g.onReady(f)}}}]));this.origin=ao(g.remote);this.destroy=function(){h.destroy()};h.init()};at.stack.SameOriginTransport=function(q){var g,r,e,h;return g={outgoing:function(l,f,t){e(l);t&&t()},destroy:function(){r&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){h=ao(q.remote);q.isHost?(an(q.props,{src:Q(q.remote,{xdm_e:ax.protocol+"//"+ax.host+ax.pathname,xdm_c:q.channel,xdm_p:4}),name:al+q.channel+"_provider"}),r=ad(q),at.Fn.set(q.channel,function(f){e=f;aw(function(){g.up.callback(!0)},0);return function(l){g.up.incoming(l,h)}})):(e=J().Fn.get(q.channel)(function(f){g.up.incoming(f,h)}),aw(function(){g.up.callback(!0)},0))},init:function(){U(g.onDOMReady,g)}}};at.stack.FlashTransport=function(h){function g(l,e){aw(function(){f.up.incoming(l,t)},0)}function y(A){var l=h.swf+"?host="+h.isHost,e="easyXDM_swf_"+Math.floor(10000*Math.random());at.Fn.set("flash_loaded"+A.replace(/[\-.]/g,"_"),function(){at.stack.FlashTransport[A].swf=r=q.firstChild;for(var E=at.stack.FlashTransport[A].queue,C=0;C<E.length;C++){E[C]()}E.length=0});h.swfContainer?q="string"==typeof h.swfContainer?ay.getElementById(h.swfContainer):h.swfContainer:(q=ay.createElement("div"),an(q.style,o&&h.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),ay.body.appendChild(q));var z="callback=flash_loaded"+au(A.replace(/[\-.]/g,"_"))+"&proto="+s.location.protocol+"&domain="+au(s.location.href.match(v)[3])+"&port="+au(s.location.href.match(v)[4]||"")+"&ns="+au(D);q.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+e+"' data='"+l+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+l+"'></param><param name='flashvars' value='"+z+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+z+"' allowScriptAccess='always' wmode='transparent' src='"+l+"' height='1' width='1'></embed></object>"}var f,x,t,r,q;return f={outgoing:function(e,z,l){r.postMessage(h.channel,e.toString());l&&l()},destroy:function(){try{r.destroyChannel(h.channel)}catch(e){}r=null;x&&(x.parentNode.removeChild(x),x=null)},onDOMReady:function(){t=h.remote;at.Fn.set("flash_"+h.channel+"_init",function(){aw(function(){f.up.callback(!0)})});at.Fn.set("flash_"+h.channel+"_onMessage",g);h.swf=B(h.swf);var e=h.swf.match(v)[3],l=function(){at.stack.FlashTransport[e].init=!0;r=at.stack.FlashTransport[e].swf;r.createChannel(h.channel,h.secret,ao(h.remote),h.isHost);h.isHost&&(o&&h.swfNoThrottle&&an(h.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),an(h.props,{src:Q(h.remote,{xdm_e:ao(ax.href),xdm_c:h.channel,xdm_p:6,xdm_s:h.secret}),name:al+h.channel+"_provider"}),x=ad(h))};at.stack.FlashTransport[e]&&at.stack.FlashTransport[e].init?l():at.stack.FlashTransport[e]?at.stack.FlashTransport[e].queue.push(l):(at.stack.FlashTransport[e]={queue:[l]},y(e))},init:function(){U(f.onDOMReady,f)}}};at.stack.PostMessageTransport=function(g){function q(f){var l;if(f.origin){l=ao(f.origin)}else{if(f.uri){l=ao(f.uri)}else{if(f.domain){l=ax.protocol+"//"+f.domain}else{throw"Unable to retrieve the origin of the event"}}}l==r&&f.data.substring(0,g.channel.length+1)==g.channel+" "&&t.up.incoming(f.data.substring(g.channel.length+1),l)}var t,e,h,r;return t={outgoing:function(f,x,l){h.postMessage(g.channel+" "+f,x||r);l&&l()},destroy:function(){N(az,"message",q);e&&(h=null,e.parentNode.removeChild(e),e=null)},onDOMReady:function(){r=ao(g.remote);if(g.isHost){var f=function(l){l.data==g.channel+"-ready"&&(h="postMessage" in e.contentWindow?e.contentWindow:e.contentWindow.document,N(az,"message",f),ak(az,"message",q),aw(function(){t.up.callback(!0)},0))};ak(az,"message",f);an(g.props,{src:Q(g.remote,{xdm_e:ao(ax.href),xdm_c:g.channel,xdm_p:1}),name:al+g.channel+"_provider"});e=ad(g)}else{ak(az,"message",q),h="postMessage" in az.parent?az.parent:az.parent.document,h.postMessage(g.channel+"-ready",r),aw(function(){t.up.callback(!0)},0)}},init:function(){U(t.onDOMReady,t)}}};at.stack.FrameElementTransport=function(h){var q,r,e,g;return q={outgoing:function(l,f,t){e.call(this,l);t&&t()},destroy:function(){r&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){g=ao(h.remote);h.isHost?(an(h.props,{src:Q(h.remote,{xdm_e:ao(ax.href),xdm_c:h.channel,xdm_p:5}),name:al+h.channel+"_provider"}),r=ad(h),r.fn=function(f){delete r.fn;e=f;aw(function(){q.up.callback(!0)},0);return function(l){q.up.incoming(l,g)}}):(ay.referrer&&ao(ay.referrer)!=am.xdm_e&&(az.top.location=am.xdm_e),e=az.frameElement.fn(function(f){q.up.incoming(f,g)}),q.up.callback(!0))},init:function(){U(q.onDOMReady,q)}}};at.stack.NameTransport=function(E){function C(e){t.contentWindow.sendMessage(e,E.remoteHelper+(H?"#_3":"#_2")+E.channel)}function A(){H?2!==++G&&H||z.up.callback(!0):(C("ready"),z.up.callback(!0))}function x(e){z.up.incoming(e,y)}function r(){g&&aw(function(){g(!0)},0)}var z,H,t,F,G,g,y,q;return z={outgoing:function(e,h,f){g=f;C(e)},destroy:function(){t.parentNode.removeChild(t);t=null;H&&(F.parentNode.removeChild(F),F=null)},onDOMReady:function(){H=E.isHost;G=0;y=ao(E.remote);E.local=B(E.local);H?(at.Fn.set(E.channel,function(f){H&&"ready"===f&&(at.Fn.set(E.channel,x),A())}),q=Q(E.remote,{xdm_e:E.local,xdm_c:E.channel,xdm_p:2}),an(E.props,{src:q+"#"+E.channel,name:al+E.channel+"_provider"}),F=ad(E)):(E.remoteHelper=E.remote,at.Fn.set(E.channel,x));var e=function(){var l=t||this;N(l,"load",e);at.Fn.set(E.channel+"_load",r);(function h(){"function"==typeof l.contentWindow.sendMessage?A():aw(h,50)})()};t=ad({props:{src:E.local+"#_4"+E.channel},onLoad:e})},init:function(){U(z.onDOMReady,z)}}};at.stack.HashTransport=function(F){function E(){if(G){var f=G.location.href,e="",g=f.indexOf("#");-1!=g&&(e=f.substring(g));e&&e!=y&&(y=e,z.up.incoming(y.substring(y.indexOf("_")+1),A))}}var z,t,C,r,y,x,G,H,q,A;return z={outgoing:function(e,g){if(H){var f=F.remote+"#"+x+++"_"+e;(t||!q?H.contentWindow:H).location=f}},destroy:function(){az.clearInterval(C);!t&&q||H.parentNode.removeChild(H);H=null},onDOMReady:function(){t=F.isHost;r=F.interval;y="#"+F.channel;x=0;q=F.useParent;A=ao(F.remote);if(t){an(F.props,{src:F.remote,name:al+F.channel+"_provider"});if(q){F.onLoad=function(){G=az;C=setInterval(E,r);z.up.callback(!0)}}else{var e=0,f=F.delay/50;(function g(){if(++e>f){throw Error("Unable to reference listenerwindow")}try{G=H.contentWindow.frames[al+F.channel+"_consumer"]}catch(h){}G?(C=setInterval(E,r),z.up.callback(!0)):aw(g,50)})()}H=ad(F)}else{G=az,C=setInterval(E,r),q?(H=parent,z.up.callback(!0)):(an(F,{props:{src:F.remote+"#"+F.channel+new Date,name:al+F.channel+"_consumer"},onLoad:function(){z.up.callback(!0)}}),H=ad(F))}},init:function(){U(z.onDOMReady,z)}}};at.stack.ReliableBehavior=function(h){var e,t,r=0,q=0,g="";return e={incoming:function(f,l){var y=f.indexOf("_"),x=f.substring(0,y).split(",");f=f.substring(y+1);x[0]==r&&(g="",t&&t(!0));0<f.length&&(e.down.outgoing(x[1]+","+r+"_"+g,l),q!=x[1]&&(q=x[1],e.up.incoming(f,l)))},outgoing:function(f,l,x){g=f;t=x;e.down.outgoing(q+","+ ++r+"_"+f,l)}}};at.stack.QueueBehavior=function(A){function z(){if(A.remove&&0===x.length){i(y)}else{if(!t&&0!==x.length&&!C){t=!0;var e=x.shift();y.down.outgoing(e.data,e.origin,function(g){t=!1;e.callback&&aw(function(){e.callback(g)},0);z()})}}}var y,x=[],t=!0,q="",C,l=0,f=!1,E=!1;return y={init:function(){ae(A)&&(A={});A.maxLength&&(l=A.maxLength,E=!0);A.lazy?f=!0:y.down.init()},callback:function(e){t=!1;var g=y.up;z();g.callback(e)},incoming:function(g,F){if(E){var h=g.indexOf("_"),r=parseInt(g.substring(0,h),10);q+=g.substring(h+1);0===r&&(A.encode&&(q=aq(q)),y.up.incoming(q,F),q="")}else{y.up.incoming(g,F)}},outgoing:function(H,e,F){A.encode&&(H=au(H));var r=[],G;if(E){for(;0!==H.length;){G=H.substring(0,l),H=H.substring(G.length),r.push(G)}for(;G=r.shift();){x.push({data:r.length+"_"+G,origin:e,callback:0===r.length?F:null})}}else{x.push({data:H,origin:e,callback:F})}f?y.down.init():z()},destroy:function(){C=!0;y.down.destroy()}}};at.stack.VerifyBehavior=function(g){function e(){l=Math.random().toString(16).substring(2);q.down.outgoing(l)}var q,l,h;return q={incoming:function(t,f){var r=t.indexOf("_");-1===r?t===l?q.up.callback(!0):h||(h=t,g.initiate||e(),q.down.outgoing(t)):t.substring(0,r)===h&&q.up.incoming(t.substring(r+1),f)},outgoing:function(t,r,x){q.down.outgoing(l+"_"+t,r,x)},callback:function(f){g.initiate&&e()}}};at.stack.RpcBehavior=function(E,C){function A(e){e.jsonrpc="2.0";y.down.outgoing(q.stringify(e))}function z(g,e){var h=Array.prototype.slice;return function(){var G=arguments.length,F,f={method:e};0<G&&"function"===typeof arguments[G-1]?(1<G&&"function"===typeof arguments[G-2]?(F={success:arguments[G-2],error:arguments[G-1]},f.params=h.call(arguments,0,G-2)):(F={success:arguments[G-1]},f.params=h.call(arguments,0,G-1)),r[""+ ++t]=F,f.id=t):f.params=h.call(arguments,0);g.namedParams&&1===f.params.length&&(f.params=f.params[0]);A(f)}}function x(G,f,M,L){if(M){var F,K;f?(F=function(e){F=n;A({id:f,result:e})},K=function(e,h){K=n;var g={id:f,error:{code:-32099,message:e}};h&&(g.error.data=h);A(g)}):F=K=n;"[object Array]"!==Object.prototype.toString.call(L)&&(L=[L]);try{var H=M.method.apply(M.scope,L.concat([F,K]));ae(H)||F(H)}catch(I){K(I.message)}}else{f&&A({id:f,error:{code:-32601,message:"Procedure not found."}})}}var y,q=C.serializer||m(),t=0,r={};return y={incoming:function(f,F){var l=q.parse(f);if(l.method){C.handle?C.handle(l,A):x(l.method,l.id,C.local[l.method],l.params)}else{var h=r[l.id];l.error?h.error&&h.error(l.error):h.success&&h.success(l.result);delete r[l.id]}},init:function(){if(C.remote){for(var e in C.remote){C.remote.hasOwnProperty(e)&&(E[e]=z(C.remote[e],e))}}y.down.init()},destroy:function(){for(var e in C.remote){C.remote.hasOwnProperty(e)&&E.hasOwnProperty(e)&&delete E[e]}y.down.destroy()}}};s.easyXDM=at}(b,d,location,b.setTimeout,decodeURIComponent,encodeURIComponent);"undefined"!=typeof b.uLogin&&b.uLogin.uLoginHost||(Array.indexOf||(Array.prototype.indexOf=function(f){for(var e=0;e<this.length;e++){if(this[e]==f){return e}}return -1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"undefined"===typeof b.console&&(b.console={log:function(){},error:function(){},info:function(){},assert:function(){}}),b.uLogin={uLoginHost:function(f){var e,g;for(g in f){if(g in f&&f[g].src&&/^https?:\/\/(.*?)\/js\/ulogin\.js/.test(f[g].src)){e=f[g].src.match(/^https?:\/\/([^/]+)/)[1].replace(/^www\./,"");break}}return"u-login.com"===e?"u-login.com":"ulogin.ru"}(d.getElementsByTagName("script"))},b.uLogin={protocol:location.href.match(/^https/i)?"https":"http",host:encodeURIComponent(location.host),uLoginHost:uLogin.uLoginHost,supportStorage:!!("localStorage" in window&&null!==window.localStorage&&"JSON" in window&&null!==window.JSON&&"undefined"!==typeof window.JSON.parse&&"undefined"!==typeof window.JSON.stringify),ids:[],timeouts:{},listeners:{},lang:(a.language||a.systemLanguage||a.userLanguage||"en").substr(0,2).toLowerCase(),langs:["en","ru","uk","fr","de"],dialog:!1,close:!1,lightbox:!1,dialogSocket:!1,pixel:"//"+uLogin.uLoginHost+"/match?rand=[rand]&u=[u]&r=[r]",providerCodes:"vkontakte odnoklassniki mailru facebook twitter google yandex livejournal openid flickr lastfm linkedin liveid soundcloud steam uid webmoney youtube foursquare tumblr googleplus dudu vimeo instagram wargaming".split(" "),providerNames:"VK Odnoklassniki Mail.ru Facebook Twitter Google Yandex LiveJournal OpenID Flickr Last.FM LinkedIn LiveID SoundCloud Steam uID WebMoney YouTube foursquare tumblr Google+ dudu Vimeo Instagram Wargaming.net".split(" "),states:["ready","receive","open","close"],widgetSettings:{},findTimer:0,waitGetWidget:[],rc:!1,altway:function(e){e=e.toLowerCase();return !!/(iPhone|iPad)(.*?)(chrome|crios|IE Mobile|UCWEB)/i.test(e)}(a.userAgent||a.vendor||b.opera),mobile:function(e){e=e.toLowerCase();return !(!/(ip(ad|od|hone)|android)/i.test(e)||/(crios|Chrome)/i.test(e)||!/(Opera|Apple|Safari)/i.test(e))}(a.userAgent||a.vendor||b.opera),get:function(e){return d.getElementById(e)},exists:function(e){return"undefined"!=typeof e},add:function(f,e,g){f.addEventListener?f.addEventListener(e,function(h){g(f,h)},!1):f.attachEvent?f.attachEvent("on"+e,function(h){g(f,h)}):f["on"+e]=function(h){g(f,h)}},is_encoded:function(e){return decodeURIComponent(e)!=e},genID:function(){for(var f=new Date,e=f.getTime()+Math.floor(100000*Math.random());this.get("ul_"+e);){e=f.getTime()+Math.floor(100000*Math.random())}return"ul_"+e},show:function(e){this.exists(e)&&(e.style.display="block")},hide:function(e){e&&this.exists(e)&&(e.style.display="none")},parse:function(f){var e={};if(!f){return e}var h=f.split("&"),h=1<h.length?h:f.split(";");for(f=0;f<h.length;f++){var g=h[f].split("=");g[0]&&(g[0]=g[0].trim());g[1]&&(g[1]=g[1].trim());e[g[0]]=g[1]}return e},scrollTop:function(){return b.pageYOffset||d.documentElement.scrollTop||d.body.scrollTop},scrollLeft:function(){return b.pageXOffset||d.documentElement.scrollLeft||d.body.scrollLeft},dialogHeight:function(){return 358},dialogWidth:function(){return 564},clientWidth:function(){var e=0;"[object Opera]"==Object.prototype.toString.call(b.opera)&&9.5>b.parseFloat(b.opera.version())?e=d.body.clientWidth:b.innerWidth&&(e=b.innerWidth);this.isIE()&&(e=d.documentElement.clientWidth);return e},clientHeight:function(){var e=0;"[object Opera]"==Object.prototype.toString.call(b.opera)&&9.5>b.parseFloat(b.opera.version())?e=d.body.clientHeight:b.innerHeight&&(e=b.innerHeight);this.isIE()&&(e=d.documentElement.clientHeight);return e},isIE:function(){if(/MSIE (\d+\.\d+);/.test(a.userAgent)){var e=Number(RegExp.$1);if(9>e){return e}}return !1},inArray:function(f,e){if(!f||!e){return !1}for(var h=0,g=e.length;h<g;h++){if(f==e[h]){return h}}return -1},findWidgets:function(){for(var g=0,e=[],i=[],h=d.getElementsByTagName("div"),f=d.getElementsByTagName("a");f[g];){f[g]&&(e[g]=f[g]),g++}for(g=0;h[g];){h[g]&&(i[g]=h[g]),g++}for(g=0;i[g]||e[g];){i[g]&&this.addWidget(i[g]),e[g]&&this.addWidget(e[g]),g++}},addWidget:function(f){var e=f.id,h=f.getAttribute("data-ulogin")||f.getAttribute("x-ulogin-params"),g=f.getAttribute("data-uloginid");!g&&!h||e||(e=this.genID(),f.setAttribute("id",e));g?this.getWidget(g,e):h&&this.setProp(e,this.ids.length,this.parse(h))},inited:function(f){for(var e=0;e<this.ids.length;e++){if(f==this.ids[e].id){return !0}}return !1},initWidget:function(f){if(f){var e=this.get(f);if(e&&(e=e.getAttribute("data-ulogin")||e.getAttribute("x-ulogin-params"))&&!this.inited(f)){var e=this.parse(e),g=this.getWidgetNumber(f);isNaN(g)?g=this.ids.length:this.ids[g]={};this.setProp(f,g,e)}}},setProp:function(f,e,g){if(this.inited(f)){return !1}this.ids[e]={id:f,dropTimer:!1,initCheck:!1,type:g.display||"",providers:g.providers||"",hidden:g.hidden||"",redirect_uri:g.redirect_uri||"",callback:g.callback||"",fields:g.fields||"first_name,last_name",optional:g.optional||"",color:g.color||"fff",opacity:g.opacity||"75",verify:g.verify||"",lang:g.lang||this.lang,altway:g.altway||this.altway,sort:"default"===g.sort?"default":"relevant",state:""};"small"!==this.ids[e].type&&"panel"!==this.ids[e].type||this.sendStats({type:this.ids[e].type});"window"==this.ids[e].type&&!this.ids[e].providers&&this.ids[e].hidden&&(this.ids[e].providers=this.providerCodes.join(","));this.ids[e].mobile=0==g.mobilebuttons?0:this.mobile;this.ids[e].altway&&(this.ids[e].redirect_uri||(this.ids[e].redirect_uri=location.href),this.ids[e].callback="");this.ids[e].redirect_uri=this.is_encoded(this.ids[e].redirect_uri)?this.ids[e].redirect_uri.replace(/\//g,"%2F").replace(/\?/g,"%3F"):encodeURIComponent(this.ids[e].redirect_uri);this.ids[e].callback&&(this.ids[e].redirect_uri="");-1==this.inArray(this.ids[e].lang,this.langs)&&(this.ids[e].lang=this.lang);switch(g.display){case"small":case"panel":this.ids[e].listener_id=!1;this.initPanel(e);break;case"window":this.initWindow(e);break;case"buttons":this.initButtons(e);break;default:this.ids.splice(e,e)}this.get(f).setAttribute("data-ulogin-inited",(+new Date).toString())},initPanel:function(u){var t=this.get(this.ids[u].id),o="small"==this.ids[u].type?1:0,n=o?21:42,j=o?16:32,m=0,k,g=o?"0 5px 0 0":"0 10px 0 0",v="url("+this.buildUrl("img/"+(o?"small.png?version=1.5.00":"panel.png?version=1.5.00"))+") "+(o?"0 0":"0 -3px")+" no-repeat";t.innerHTML="";if("other"===this.ids[u].hidden){k=this.providerCodes.slice(0);if(this.ids[u].providers){for(var i=this.ids[u].providers.split(","),p=0;p<i.length;p++){k.splice(k.indexOf(i[p]),1)}}this.ids[u].hidden=k.toString()}if(this.ids[u].providers){var i="relevant"===this.ids[u].sort?this.relProviders(this.ids[u].providers,this.ids[u].hidden,1):this.ids[u].providers.split(","),e,m=m+n*i.length,n=d.createElement("div");this.ids[u].buttonsContainer=n;this.resetStyle(n,{width:m,height:j,display:"inline-block"});t.appendChild(n);for(e in i){m=i[e],k=this.inArray(m,this.providerCodes),-1<k&&(n=d.createElement("div"),n.setAttribute("data-uloginbutton",m),n.setAttribute("title",this.providerNames[k]),this.resetStyle(n,{"float":"left",width:j,height:j,margin:g,background:v,cursor:"pointer",backgroundPosition:this.getIconPosition(o,k)}),this.ids[u].buttonsContainer.appendChild(n))}}this.ids[u].hidden&&("relevant"===this.ids[u].sort&&(this.ids[u].hidden=this.relProviders(this.ids[u].providers,this.ids[u].hidden,2).join(",")),this.ids[u].drop=d.createElement("img"),this.ids[u].drop.src=this.buildUrl("img/blank.gif"),this.resetStyle(this.ids[u].drop,{width:j,height:j,margin:g,cursor:"pointer",background:v,verticalAlign:"top",display:"inline","float":"none"}),this.add(this.ids[u].drop,"mouseover",function(f){uLogin.ids[u].showed=!1;uLogin.dropdownDelayed(u,o?1:2);uLogin.setOpacity(f,uLogin.ids[u].opacity)}),this.add(this.ids[u].drop,"mouseout",function(f){uLogin.ids[u].showed=!0;uLogin.dropdownDelayed(u,0);uLogin.setOpacity(f)}),this.add(this.ids[u].drop,"click",function(){uLogin.dropdown(u,o?1:2)}),t.appendChild(this.ids[u].drop),this.initDrop(u));this.initButtons(u)},initWindow:function(f){var e=this.get(this.ids[f].id),g=e.getElementsByTagName("*");g.length?e=g[0]:(g=document.createElement("span"),g.innerHTML=e.innerHTML,e.innerHTML="",e=e.appendChild(g));e.setAttribute("data-uloginbutton","window");e.setAttribute("data-ulogin-default","true");this.ids[f].opacity=75;this.initButtons(f)},sendPixel:function(){this.getRC();if(this.pixel){var f=d.createElement("iframe"),e=this.getRC();f.src=this.pixel.replace("[rand]",parseInt(100000*Math.random())).replace("[u]",encodeURIComponent(location.href)).replace("[r]",encodeURIComponent(d.referrer||""));f.width=f.height=1;f.style.display="none";e.appendChild(f);c(function(){e.removeChild(f)},3000);this.pixel=!1;var g=d.createElement("script");g.type="text/javascript";g.charset="utf-8";g.async="true";g.src="//w.uptolike.com/widgets/v1/extra.js?rnd="+parseInt(1000000*Math.random());g.isLoaded=!1;d.getElementsByTagName("head")[0].appendChild(g)}},sendStats:function(f){var e={r:parseInt(100000*Math.random())};f.type&&(e.type=f.type);f=this.buildUrl("stats.html",e);this.initSocket(f,this.getRC())},mergeAccounts:function(f,e){if(!f){return console.error('uLogin ERROR (mergeAccounts): invalid token "'+f+'"'),!1}var g={token:f};e?("undefined"!==typeof e.join&&(e=e.join(",")),g.identities=encodeURIComponent(e),g=this.buildUrl("merge_accounts.php",g)):g=this.buildUrl("require_verify.php",g);this.loadWindow(g)},getRC:function(){this.rc||(this.rc=d.createElement("div"),this.rc.setAttribute("id","ulogin_receiver_container"),this.resetStyle(this.rc,{width:0,height:0,display:"none"}),d.getElementsByTagName("body")[0].appendChild(this.rc));return this.rc},clearTimeouts:function(){for(var e in this.timeouts){clearTimeout(this.timeouts[e])}},init:function(f){if(d.body){""==f&&(f=d.getElementsByTagName("script"),f=f[f.length-1].src,-1==f.indexOf("?")&&(f+="?"),f=f.substr(f.indexOf("?")+1));if(""!=f){var e=this.parse(f);if(e.display){var h=e.id||"uLogin";if(this.get(h)){f=!0;for(var g=0;g<this.ids.length;g++){h==this.ids[g].id&&(f=!1)}f&&this.setProp(e.id||"uLogin",this.ids.length,e)}else{c('uLogin.init("'+f+'")',1000)}}}uLogin.timeouts.search_all=c(function(){uLogin.findWidgets();if("complete"===d.readyState&&(0===uLogin.findTimer&&(uLogin.findTimer=+new Date),10000<new Date-uLogin.findTimer)){return !1}uLogin.timeouts.all=c(arguments.callee,50)},50);this.findWidgets();uLogin.timeouts.search_ulogin=c(function(){uLogin.checkAsyncWidgets();uLogin.timeouts.search_ulogin=c(arguments.callee,50)},50);this.checkAsyncWidgets();uLogin.timeouts.check_widgets=c(function(){uLogin.checkCurrentWidgets();uLogin.timeouts.check_widgets=c(arguments.callee,300)},30);this.checkCurrentWidgets();this.sendPixel()}else{c(function(){uLogin.init()},20)}},newDialogSocket:function(e){this.dialogSocket&&this.dialogSocket.destroy();this.dialogSocket=e},initSocket:function(g,f,j,i){i||(i=0);var h=new easyXDM.Socket({remote:g,swf:this.isIE()?this.buildUrl("js/easyxdm.swf"):"",props:{style:this.extend({margin:0,padding:0,background:"#fff",border:0,position:"absolute",left:0,top:0,overflow:"hidden",width:"100%",height:"100%"},j),frameBorder:"0"},container:f,onMessage:function(k){var e,l;/weights:/.test(k)||console.info("[uLogin] ulogin.js received message: "+k);if(e=k.match(/(.*?)\((.*?)\)/)){l=e[1],k=e[2]}/^https?:\/\//.test(k)?location.href=k:-1<uLogin.states.indexOf(k)?uLogin._changeState(i,k):"closeme"==k?(uLogin.hideAll(),h.destroy()):/to_window:/.test(k)?(k=uLogin.buildUrl(k.replace(/to_window:\/?/,"",""),{set:encodeURIComponent("{window:1}")}),uLogin.loadWindow(k)):/weights:/.test(k)?uLogin.setWeights(k.replace(/weights:\/?/,"","")):uLogin.ids[i]&&"undefined"!=typeof b[uLogin.ids[i].callback]?(uLogin._changeState(i,"receive"),b[uLogin.ids[i].callback](k),uLogin.dialog&&uLogin.hideAll()):l&&"undefined"!=typeof b[l]&&(b[l].apply(b,k.split(",")),h.destroy(),uLogin.dialog&&uLogin.hideAll())}});return h},getWidgetNumber:function(f){for(var e=0;e<this.ids.length;e++){if(f==this.ids[e].id){return e}}return NaN},onMoveWindow:function(){this.moveWindow()},loadWindow:function(i,e){null===e&&(e=!1);var m=this.ids[e]?this.ids[e].opacity:75,k;try{d.body.removeChild(this.lightbox)}catch(h){}try{d.body.removeChild(this.dialog)}catch(j){}try{d.body.removeChild(this.close)}catch(g){}k=d.createElement("div");this.resetStyle(k,{position:"fixed",zIndex:9997,width:"100%",height:"100%",background:"#"+(this.ids[e]?this.ids[e].color:"fff"),display:"none"});this.setOpacity(k,m);this.lightbox=k;k=d.createElement("div");k.id=this.genID();this.resetStyle(k,{position:"absolute",zIndex:9998,left:Math.floor(this.scrollLeft()+(this.clientWidth()-this.dialogWidth())/2),top:Math.floor(this.scrollTop()+(this.clientHeight()-this.dialogHeight())/2),width:this.dialogWidth(),height:this.dialogHeight(),overflow:"hidden",display:"none",border:"10px solid #666",borderRadius:"8px"});this.dialog=k;k=d.createElement("img");k.src=this.buildUrl("img/blank.gif");this.resetStyle(k,{position:"absolute",height:30,zIndex:9999,background:"url("+this.buildUrl("img/x.png")+")",cursor:"pointer",display:"none",left:Math.floor(this.scrollLeft()+(this.clientWidth()+562)/2),top:Math.floor(this.scrollTop()+(this.clientHeight()-374)/2)});this.close=k;d.body.appendChild(this.lightbox);d.body.appendChild(this.dialog);d.body.appendChild(this.close);this.add(this.lightbox,"click",function(){uLogin.hideAll()});this.add(this.close,"click",function(){uLogin.hideAll()});this.add(this.close,"mouseover",function(f){f.style.background="url("+uLogin.buildUrl("img/x_.png")+")"});this.add(this.close,"mouseout",function(f){f.style.background="url("+uLogin.buildUrl("img/x.png")+")"});this.add(b,"scroll",function(){uLogin.onMoveWindow()});this.add(b,"resize",function(){uLogin.onMoveWindow()});this.newDialogSocket(this.initSocket(i,this.dialog.getAttribute("id"),{},e));this.show(this.close);this.show(this.lightbox);this.show(this.dialog);this.onMoveWindow()},hideAll:function(){this.hide(this.lightbox);this.hide(this.dialog);this.hide(this.close);for(var e=0;e<this.ids.length;e++){this.ids[e].showed=!1,this.hide(this.ids[e].hiddenW),this.hide(this.ids[e].hiddenA)}},moveWindow:function(){if(!this.dialog||!this.dialog.firstChild){return !1}for(var g=this.dialogWidth(),f=this.dialogHeight(),g=(Math.floor(this.scrollLeft()+(this.clientWidth()-g)/2)-Number(this.dialog.style.left.slice(0,-2)))/10,f=(Math.floor(this.scrollTop()+(this.clientHeight()-f)/2)-Number(this.dialog.style.top.slice(0,-2)))/10,j=(Math.floor(this.scrollLeft()+(this.clientWidth()+562)/2)-Number(this.close.style.left.slice(0,-2)))/10,i=(Math.floor(this.scrollTop()+(this.clientHeight()-374)/2)-Number(this.close.style.top.slice(0,-2)))/10,h=0;10>h;h++){this.dialog.style.left=g+Number(this.dialog.style.left.slice(0,-2))+"px",this.dialog.style.top=f+Number(this.dialog.style.top.slice(0,-2))+"px",this.close.style.left=j+Number(this.close.style.left.slice(0,-2))+"px",this.close.style.top=i+Number(this.close.style.top.slice(0,-2))+"px"}},resetStyle:function(i,g){!g&&(g={});var o=this.extend({margin:0,padding:0,outline:"none",border:"none",borderRadius:0,cursor:"default","float":"none",position:"relative",display:"inherit",width:"auto",height:"auto",left:0,top:0,boxSizing:"content-box"},g),n=["width","height","left","top"],m=["float"],l;for(l in o){-1<this.inArray(l,n)&&"number"===typeof o[l]&&(o[l]+="px");try{-1<this.inArray(l,m)&&i.style.setProperty(l,o[l])}catch(j){}try{i.style[l]=o[l]}catch(k){}}},getIconPosition:function(f,e){e+=8<e?1:0;return f?"0 -"+(19+23*e)+"px":"0 -"+(3+35*(e+1))+"px"},setOpacity:function(f,e){f.style.filter=e?"alpha(opacity="+e+") progid:DXImageTransform.Microsoft.AlphaImageLoader(src=transparent.png, sizingMethod='crop')":"";f.style.opacity=e?parseFloat(e)/100:""},initDrop:function(g){if(!this.ids[g].mobile&&""!=this.ids[g].hidden){var e,i,h=this.get(this.ids[g].id),f=this.genID();i=310<23*this.ids[g].hidden.split(",").length-2?310:23*this.ids[g].hidden.split(",").length-2;e=d.createElement("div");e.id=f;this.resetStyle(e,{position:"absolute",zIndex:9999,width:128,height:i,border:"5px solid #666",borderRadius:"4px",display:"none"});this.ids[g].hiddenW=e;h.appendChild(this.ids[g].hiddenW);e=this.buildUrl("drop.html",{id:g,redirect_uri:this.ids[g].redirect_uri,callback:this.ids[g].callback,providers:this.ids[g].hidden,fields:this.ids[g].fields,optional:this.ids[g].optional,othprov:this.ids[g].providers,protocol:this.protocol,host:this.host,lang:this.ids[g].lang,verify:this.ids[g].verify,sort:this.ids[g].sort,altway:this.ids[g].altway?1:null});this.initSocket(e,f,{position:"relative",width:"128px",height:i+"px"},g);e=d.createElement("div");this.resetStyle(e,{position:"absolute",background:"#000",left:82,top:"100%",width:41,height:13,border:"5px solid #666",textAlign:"center"});i=d.createElement("a");i.href=this.buildUrl("");i.target="_blank";this.resetStyle(i,{width:41,height:13,background:"url("+this.buildUrl("img/text.png")+") no-repeat"});e.appendChild(i);this.ids[g].hiddenW.appendChild(e);e=d.createElement("img");e.src=this.buildUrl("img/link.png");this.resetStyle(e,{width:8,height:4,position:"absolute",zIndex:9999,display:"none"});this.ids[g].hiddenA=e;h.appendChild(this.ids[g].hiddenA);this.ids[g].showed=!1;this.add(d.body,"click",function(k,j){j.target||(j.target=j.srcElement);for(var l=0;l<uLogin.ids.length;l++){j.target!=uLogin.ids[l].drop&&(uLogin.hide(uLogin.ids[l].hiddenW),uLogin.hide(uLogin.ids[l].hiddenA))}});this.ids[g].hiddenW&&this.ids[g].hiddenA&&(this.add(this.ids[g].hiddenW,"mouseout",function(){uLogin.dropdownDelayed(g,0)}),this.add(this.ids[g].hiddenA,"mouseout",function(){uLogin.dropdownDelayed(g,0)}),this.add(this.ids[g].hiddenW,"mouseover",function(){uLogin.clearDropTimer(g)}),this.add(this.ids[g].hiddenA,"mouseover",function(){uLogin.clearDropTimer(g)}))}},showDrop:function(g,f){if(this.ids[g].hiddenW||this.ids[g].hiddenA){if(this.ids[g].showed||0==f){this.hide(this.ids[g].hiddenW),this.hide(this.ids[g].hiddenA),this.ids[g].showed=!1}else{this.show(this.ids[g].hiddenA);this.show(this.ids[g].hiddenW);this.ids[g].showed=!0;var j,i,h=this.ids[g].drop;j=0+h.offsetLeft;i=0+h.offsetTop;j-=h.scrollLeft;i-=h.scrollTop;this.ids[g].hiddenW.style.left=j-(1==f?100:106)+"px";this.ids[g].hiddenW.style.top=i+(1==f?21:37)+"px";this.ids[g].hiddenA.style.left=j+(1==f?4:12)+"px";this.ids[g].hiddenA.style.top=i+(1==f?17:33)+"px"}}},clearDropTimer:function(e){this.ids[e].dropTimer&&b.clearTimeout(this.ids[e].dropTimer)},dropdown:function(f,e){this.clearDropTimer(f);this.showDrop(f,e)},dropdownDelayed:function(f,e){this.clearDropTimer(f);this.ids[f].dropTimer=c(function(){uLogin.showDrop(f,e)},600)},initButtons:function(f){var e=this.get(this.ids[f].id);this.ids[f].mobile&&this.add(this.get(this.ids[f].id),"click",function(g,i){i.preventDefault?i.preventDefault():i.returnValue=!1;var h=uLogin.buildUrl("mobile.html",{id:uLogin.ids[f].id,redirect_uri:uLogin.ids[f].redirect_uri,callback:uLogin.ids[f].callback,fields:uLogin.ids[f].fields,optional:uLogin.ids[f].optional,protocol:uLogin.ids[f].protocol,host:uLogin.ids[f].host,lang:uLogin.ids[f].lang,verify:uLogin.ids[f].verify,providers:uLogin.ids[f].providers,hidden:uLogin.ids[f].hidden});uLogin.openWithReceiver(h,f);return !1});"window"===this.ids[f].type?this._proceedChildren(e,this._(this._initButton),f):(this.ids[f].providers="",this._proceedChildren(e,this._(this._initButton),f),this.ids[f].providers=this.ids[f].providers.slice(0,this.ids[f].providers.length-1));this._changeState(f,this.states[0])},_:function(e){return function(){e.apply(uLogin,arguments)}},_proceedChildren:function(h,g,l){h=h.childNodes;var k,j;for(j=0;j<h.length;j++){var i=h[j];i.getAttribute&&(g(i,l),(k=i.getAttribute("data-uloginbutton")||i.getAttribute("x-ulogin-button"))&&-1<this.inArray(k,this.providerCodes)&&!(new RegExp(k+"(,|$)","i")).test(this.ids[l].providers)&&(this.ids[l].providers+=k+","));this._proceedChildren(i,g,l)}},_initButton:function(g,f){var j=g.getAttribute("data-uloginbutton")||g.getAttribute("x-ulogin-button");if(j){if(-1<this.inArray(j,this.providerCodes)){this.add(g,"mouseover",function(e){if(/disabled/.test(e.className)){return !1}uLogin.setOpacity(e,parseFloat(uLogin.ids[f].opacity))}),this.add(g,"mouseout",function(e){if(/disabled/.test(e.className)){return !1}uLogin.setOpacity(e)}),this.ids[f].mobile||this.add(g,"click",function(e){if(/disabled/.test(e.className)){return !1}e=e.getAttribute("data-uloginbutton")||e.getAttribute("x-ulogin-button");uLogin.startAuth(e,"",f)})}else{if("window"===j&&(this.ids[f].mobile||this.add(g,"click",function(e,l){l.preventDefault?l.preventDefault():l.returnValue=!1;if(/disabled/.test(e.className)){return !1}var k=uLogin.buildUrl(uLogin.ids[f].mobile?"mobile.html":"window.html",{id:f,redirect_uri:uLogin.ids[f].redirect_uri,callback:uLogin.ids[f].callback,fields:uLogin.ids[f].fields,optional:uLogin.ids[f].optional,protocol:uLogin.protocol,host:uLogin.host,lang:uLogin.ids[f].lang,verify:uLogin.ids[f].verify,sort:uLogin.ids[f].sort,othprov:uLogin.ids[f].hidden,providers:uLogin.ids[f].providers,altway:uLogin.ids[f].altway?1:null});uLogin.loadWindow(k,f);return !1}),g.getAttribute("data-ulogin-default"))){var i=this.buildUrl("img/"+("ru"==this.ids[f].lang?"":this.ids[f].lang+"/")+"button.png"),h=this.buildUrl("img/"+("ru"==this.ids[f].lang?"":this.ids[f].lang+"/")+"button_.png");g.src=i;this.resetStyle(g,{cursor:"pointer"});this.add(g,"mouseover",function(e){if(/disabled/.test(e.parentNode.className)){return !1}e.src!=h&&(e.src=h)});this.add(g,"mouseout",function(e){if(/disabled/.test(e.parentNode.className)){return !1}e.src!=i&&(e.src=i)})}}}},sendWeight:function(e){this.initSocket(this.buildUrl("weight_set.html",{provider:e,r:parseInt(100000*Math.random())}),this.getRC(),{background:"transparent"})},setWeights:function(e){this.supportStorage&&(localStorage.providers_weight=e)},getWeights:function(){try{return JSON.parse(localStorage.providers_weight)}catch(e){return{}}},relProviders:function(h,g,l){h=h.split(",");g=g.split(",");if(this.supportStorage){var k=this.getWeights(),j;for(j in k){var k=this.inArray(j,h),i=this.inArray(j,g);-1!==k?(h.splice(k,1),h.splice(0,0,j)):-1!==i&&(h.splice(0,0,j),g.splice(i,1),g.splice(0,0,h[h.length-1]),h.splice(h.length-1,1))}}return 1===l?h:g},startAuth:function(f,e,h){var g={name:f,window:1,lang:this.lang,fields:this.ids[h].fields,host:this.host,optional:this.ids[h].optional,redirect_uri:this.ids[h].redirect_uri||location.href,verify:this.ids[h].verify,callback:this.ids[h].callback,screen:screen.width+"x"+screen.height,url:e,providers:this.ids[h].providers,hidden:this.ids[h].hidden,app_id:"fc03c5a2"};this.ids[h].altway&&(g.altway=1);f=e||"webmoney"!=f&&"livejournal"!=f&&"openid"!=f?this.buildUrl("auth.php",g):this.buildUrl("url.php",g);this._changeState(h,this.states[1]);this.ids[h].altway?location.href=f:this.openWithReceiver(f,h)},openWithReceiver:function(f,e){!e&&(e=0);this.initSocket(this.buildUrl("buttons_receiver.html",{r:parseInt(100000*Math.random())}),this.getRC(),{background:"transparent"},e);var g=this.getRC().getElementsByTagName("iframe"),g=g[g.length-1].contentWindow.open(f,"uw","width=800,height=600,left="+(screen.width-800)/2+",top="+(screen.height-600)/2);this.checkWindow(g,e)},checkWindow:function(f,e){var g=window.setInterval(function(){f&&f.closed&&(window.clearInterval(g),uLogin._changeState(e,"close"))},50)},checkCurrentWidgets:function(){for(var e=0;this.ids[e];){this.checkWidget(this.ids[e++].id)}},checkWidget:function(f){var e=this.get(f);if(e){if(this.inited(f)){f=this.getWidgetNumber(f);var g=this.ids[f].type;if(("small"===g||"panel"===g)&&!e.childNodes.length){return e=this.ids[f].id,uLogin.ids[f].id=!1,uLogin.initWidget(e),!0}e.getAttribute("data-ulogin-inited")||(e=this.ids[f].id,uLogin.ids[f].id=!1,uLogin.initWidget(e))}else{this.addWidget(this.get(f))}}else{this.ids[this.getWidgetNumber(f)].id=!1}},buildUrl:function(g,f){f||(f={});g="https://"+this.uLoginHost+"/"+g;var j="",i;for(i in f){var h=f[i];if(null!==h){if(/\?/.test(h)||/\//.test(h)||/:/.test(h)){h=""}j+=i+"="+h+"&"}}0<j.length&&(j=j.substring(0,j.length-1),g=g+(/\?/.test(g)?"&":"?")+j);return g},getWidget:function(f,e){if(this.inited(e)||-1!==this.inArray(f,this.waitGetWidget)){return !1}this.waitGetWidget.push(f);if(this.widgetSettings[f]){this.widgetSettings[f]&&this.setProp(e,this.ids.length,this.widgetSettings[f])}else{var h=this.getRC(),g=d.createElement("script");g.async=!0;g.src=this.buildUrl("getwidget",{widgetid:f,uloginid:e});h.appendChild(g)}},setWidget:function(f,e,j){if(j&&!uLogin.widgetSettings[f]&&"undefined"!==typeof j.display){if("window"==j.display){var i=d.createElement("img");i.setAttribute("src",uLogin.buildUrl("img/button.png"));i.setAttribute("style","cursor:pointer; width:187px; height:30px");i.setAttribute("alt","\u041c\u0443\u043b\u044c\u0442\u0438\u0412\u0445\u043e\u0434");d.getElementById(e).appendChild(i)}var i=uLogin.parse(d.getElementById(e).getAttribute("data-ulogin")),g;for(g in i){j[g]=i[g]}uLogin.setProp(e,uLogin.ids.length,j);uLogin.widgetSettings[f]=j}uLogin.waitGetWidget.splice(uLogin.inArray(f,uLogin.waitGetWidget),1)},customInit:function(){for(var e=0;e<arguments.length;e++){if(!uLogin.get(arguments[e])||!arguments[e]){return console.error('uLogin ERROR (customInit): Element with ID="'+arguments[e]+'" not found'),!1}uLogin.checkWidget(arguments[e])}},checkAsyncWidgets:function(){var e=this.get("ulogin")||this.get("uLogin");e&&e.id&&this.addWidget(e)},setStateListener:function(f,e,g){this.listeners[f]||(this.listeners[f]={});this.listeners[f][e]||(this.listeners[f][e]=[]);return this.listeners[f][e].push(g)-1},removeStateListener:function(f,e,g){return this.listeners[f]&&this.listeners[f][g]?this.listeners[f][g].splice(e,1):!1},_changeState:function(f,e){try{this.ids[f].state=e;for(var h=0;this.listeners[this.ids[f].id][e][h];){this.listeners[this.ids[f].id][e][h++]()}}catch(g){}},extend:function(f,e){for(var g in e){f[g]=e[g]}return f}},-1==uLogin.langs.indexOf(uLogin.lang)&&(uLogin.lang=uLogin.langs[0]),uLogin.init("undefined"!=typeof uLogin_query?uLogin_query:""));b.receiver=function(f,e){b[e](f)};b.redirect=function(f,e){var h=d.createElement("form");h.action=e;h.method="post";h.target="_top";h.style.display="none";var g=d.createElement("input");g.type="hidden";g.name="token";g.value=f;h.appendChild(g);d.body.appendChild(h);h.submit()}})(window,document,navigator,setTimeout);